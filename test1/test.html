<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Montserrat", sans-serif;
  }

  @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap");

  body {
    font-family: "Montserrat", sans-serif;
  }

  .form-select-chosen {
    position: relative;
    width: 100%;
    font-family: "Montserrat", sans-serif;
    border: 1px solid #ccc;
    border-radius: 8px;
  }

  .form-select-chosen__option {
    transition-duration: 0.3s;
  }

  .form-select-chosen__option::marker {
    content: none;
  }

  .form-select-chosen__option:hover {
    background-color: #ccc;

  }

  .form-select-chosen__option {
    padding: 0.5rem;
    padding-left: 0.8rem;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    border-top: 1px solid #ccc;
  }

  .form-select-chosen__output:empty::before {
    position: absolute;
    content: attr(data-placeholder);
    color: #b0b0b0;
    opacity: 0.8;
    letter-spacing: 0.02em;
    padding-left: 0.5rem;
    margin-top: -1.5rem;
    pointer-events: none;
  }

  .form-select-chosen__search {
    border-radius: 4px;
  }

  .form-select-chosen__input {
    width: 100%;
    padding: 0.5rem;
    border-radius: 8px;
    border: #ccc 1px solid;
    font-size: 1rem;
  }

  .form-select-chosen__input.error-class {
    border: 1.5px solid #e53935;
    box-shadow: 0 0 0 1px #e53935;
  }

  .form-select-chosen__input.error-class~.form-select-chosen__output-wrap .form-select-chosen__output {
    border: 1.5px solid #e53935;
    box-shadow: 0 0 0 1px #e53935;
  }

  .form-select-chosen__search-input {
    width: calc(100% - 1rem);
    margin: 0.5rem;
    padding: 0.5rem;
    padding-left: 2rem;
    border-radius: 8px;
    border: #ccc 1px solid;
    background-image: url('https://www.svgrepo.com/show/7109/search.svg');
    background-repeat: no-repeat;
    background-position: left 0.5rem center;
    background-size: 16px 16px;
  }

  .form-select-chosen__output-wrap {
    position: relative;
    user-select: none;
    width: 100%;
  }

  .form-select-chosen__options {
    width: 100%;
    max-height: 400px;
    overflow-y: scroll;
  }

  .input-error {
    color: #e53935;
    margin-top: 0.5rem
  }

  button {
    padding: 0.5rem;
    border-radius: 8px;
    border: #ccc 1px solid;
    font-size: 1rem;
    cursor: pointer;
    width: 45%;
    margin-left: auto;
    margin-right: auto;
    transition-duration: 0.3s;
  }

  button:hover {
    background-color: #89b77f;
    color: #e8e7e7;
  }
</style>

<div style="text-align: center; font-size: 2rem; margin-bottom: 2rem">
  TEST 1
</div>

<form style="padding: 2rem; display: grid; gap: 2rem" action="/example" data-att-form="174ff5d5abd65a082e7616ebc2c57e60"
  novalidate>
  <!-- component: start -->
  <div data-custom="test">
    <div class="form-select-chosen">
      <input class="form-select-chosen__input" name="test" required="" disabled />
      <div class="form-select-chosen__output-wrap">
        <div class="form-select-chosen__output" data-placeholder="Ваша страна проживания"></div>
      </div>
      <div class="form-select-chosen__search">

        <input class="form-select-chosen__search-input" type="text" />

        <ul class="form-select-chosen__options">
          <li class="form-select-chosen__option" data-value="1">Беларусь</li>
          <li class="form-select-chosen__option" data-value="2">Россия</li>
          <li class="form-select-chosen__option" data-value="97">Австралия</li>
          <li class="form-select-chosen__option" data-value="48">Австрия</li>
          <li class="form-select-chosen__option" data-value="16">Азербайджан</li>
          <li class="form-select-chosen__option" data-value="104">Алжир</li>
          <li class="form-select-chosen__option" data-value="85">Ангола</li>
          <li class="form-select-chosen__option" data-value="74">Аргентина</li>
          <li class="form-select-chosen__option" data-value="35">Армения</li>
          <li class="form-select-chosen__option" data-value="44">Бельгия</li>
          <li class="form-select-chosen__option" data-value="36">Болгария</li>
          <li class="form-select-chosen__option" data-value="86">Бразилия</li>
          <li class="form-select-chosen__option" data-value="87">Бурунди</li>
          <li class="form-select-chosen__option" data-value="28">Великобритания</li>
          <li class="form-select-chosen__option" data-value="34">Венгрия</li>
          <li class="form-select-chosen__option" data-value="95">Венесуэла</li>
          <li class="form-select-chosen__option" data-value="70">Вьетнам</li>
          <li class="form-select-chosen__option" data-value="113">Гана</li>
          <li class="form-select-chosen__option" data-value="82">Гватемала</li>
          <li class="form-select-chosen__option" data-value="13">Германия</li>
          <li class="form-select-chosen__option" data-value="60">Греция</li>
          <li class="form-select-chosen__option" data-value="12">Грузия</li>
          <li class="form-select-chosen__option" data-value="33">Дания</li>
          <li class="form-select-chosen__option" data-value="10">Другие</li>
          <li class="form-select-chosen__option" data-value="47">Египет</li>
          <li class="form-select-chosen__option" data-value="15">Израиль</li>
          <li class="form-select-chosen__option" data-value="68">Индия</li>
          <li class="form-select-chosen__option" data-value="101">Индонезия</li>
          <li class="form-select-chosen__option" data-value="76">Иордания</li>
          <li class="form-select-chosen__option" data-value="98">Ирак</li>
          <li class="form-select-chosen__option" data-value="45">Иран</li>
          <li class="form-select-chosen__option" data-value="64">Ирландия</li>
          <li class="form-select-chosen__option" data-value="106">Исландия</li>
          <li class="form-select-chosen__option" data-value="37">Испания</li>
          <li class="form-select-chosen__option" data-value="41">Италия</li>
          <li class="form-select-chosen__option" data-value="111">Йемен</li>
          <li class="form-select-chosen__option" data-value="19">Казахстан</li>
          <li class="form-select-chosen__option" data-value="115">Камбоджа</li>
          <li class="form-select-chosen__option" data-value="67">Камерун</li>
          <li class="form-select-chosen__option" data-value="22">Канада</li>
          <li class="form-select-chosen__option" data-value="112">Катар</li>
          <li class="form-select-chosen__option" data-value="20">Киргизия</li>
          <li class="form-select-chosen__option" data-value="56">Китай</li>
          <li class="form-select-chosen__option" data-value="57">Колумбия</li>
          <li class="form-select-chosen__option" data-value="116">Конго</li>
          <li class="form-select-chosen__option" data-value="71">Корея</li>
          <li class="form-select-chosen__option" data-value="108">Коста-Рика</li>
          <li class="form-select-chosen__option" data-value="69">Кот-д'Ивуар</li>
          <li class="form-select-chosen__option" data-value="50">Куба</li>
          <li class="form-select-chosen__option" data-value="31">Кувейт</li>
          <li class="form-select-chosen__option" data-value="7">Латвия</li>
          <li class="form-select-chosen__option" data-value="46">Ливан</li>
          <li class="form-select-chosen__option" data-value="92">Ливия</li>
          <li class="form-select-chosen__option" data-value="6">Литва</li>
          <li class="form-select-chosen__option" data-value="23">Лицо без гр-ва</li>
          <li class="form-select-chosen__option" data-value="96">Македония</li>
          <li class="form-select-chosen__option" data-value="91">Малайзия</li>
          <li class="form-select-chosen__option" data-value="102">Марокко</li>
          <li class="form-select-chosen__option" data-value="78">Мексика</li>
          <li class="form-select-chosen__option" data-value="18">Молдова</li>
          <li class="form-select-chosen__option" data-value="42">Монголия</li>
          <li class="form-select-chosen__option" data-value="139">Не гражданин</li>
          <li class="form-select-chosen__option" data-value="90">Непал</li>
          <li class="form-select-chosen__option" data-value="66">Нигерия</li>
          <li class="form-select-chosen__option" data-value="25">Нидерланды</li>
          <li class="form-select-chosen__option" data-value="103">Новая Зеландия</li>
          <li class="form-select-chosen__option" data-value="59">Норвегия</li>
          <li class="form-select-chosen__option" data-value="62">ОАЭ</li>
          <li class="form-select-chosen__option" data-value="110">Оман</li>
          <li class="form-select-chosen__option" data-value="119">Пакистан</li>
          <li class="form-select-chosen__option" data-value="14">Польша</li>
          <li class="form-select-chosen__option" data-value="81">Португалия</li>
          <li class="form-select-chosen__option" data-value="63">Республика Кипр</li>
          <li class="form-select-chosen__option" data-value="107">Сальвадор</li>
          <li class="form-select-chosen__option" data-value="32">Саудовская Аравия</li>
          <li class="form-select-chosen__option" data-value="100">Сенегал</li>
          <li class="form-select-chosen__option" data-value="65">Сербия</li>
          <li class="form-select-chosen__option" data-value="114">Сингапур</li>
          <li class="form-select-chosen__option" data-value="61">Словакия</li>
          <li class="form-select-chosen__option" data-value="79">Словения</li>
          <li class="form-select-chosen__option" data-value="80">Судан</li>
          <li class="form-select-chosen__option" data-value="17">США</li>
          <li class="form-select-chosen__option" data-value="49">Таджикистан</li>
          <li class="form-select-chosen__option" data-value="84">Таиланд</li>
          <li class="form-select-chosen__option" data-value="88">Тунис</li>
          <li class="form-select-chosen__option" data-value="58">Туркменистан</li>
          <li class="form-select-chosen__option" data-value="38">Турция</li>
          <li class="form-select-chosen__option" data-value="27">Узбекистан</li>
          <li class="form-select-chosen__option" data-value="11">Украина</li>
          <li class="form-select-chosen__option" data-value="109">Филиппины</li>
          <li class="form-select-chosen__option" data-value="29">Финляндия</li>
          <li class="form-select-chosen__option" data-value="40">Франция</li>
          <li class="form-select-chosen__option" data-value="43">Хорватия</li>
          <li class="form-select-chosen__option" data-value="72">Черногория</li>
          <li class="form-select-chosen__option" data-value="21">Чехия</li>
          <li class="form-select-chosen__option" data-value="94">Чили</li>
          <li class="form-select-chosen__option" data-value="30">Швейцария</li>
          <li class="form-select-chosen__option" data-value="24">Швеция</li>
          <li class="form-select-chosen__option" data-value="118">Шри-Ланка</li>
          <li class="form-select-chosen__option" data-value="93">Эль-Сальвадор</li>
          <li class="form-select-chosen__option" data-value="5">Эстония</li>
          <li class="form-select-chosen__option" data-value="39">Эфиопия</li>
          <li class="form-select-chosen__option" data-value="105">ЮАР</li>
          <li class="form-select-chosen__option" data-value="99">Южная Корея</li>
          <li class="form-select-chosen__option" data-value="75">Япония</li>
        </ul>
      </div>
    </div>
    <!-- component: end -->
    <span class="input-error" data-error="test" style="display: none">Error message</span>
  </div>

  <button type="submit">Submit</button>
</form>

<script>
  window.addEventListener("DOMContentLoaded", () =>
    AttForm.create("174ff5d5abd65a082e7616ebc2c57e60", {
      inputInvalidClass: "error-class",
      customInvalidClass: "error-class-custom",
    })
  );
  window.addEventListener("DOMContentLoaded", () => {
    document.addEventListener("att-form:before", (e) => {
      e.preventDefault();

      const { formData, attForm } = e.detail;
      const fields = Object.fromEntries(formData.entries());

      if (fields.test === "") {
        attForm.setError("test", "test-error-message");
      }
    });
  });

  window.addEventListener("DOMContentLoaded", () => {
    const options = document.querySelectorAll(".form-select-chosen__option");
    const hiddenInput = document.querySelector(".form-select-chosen__input");
    const displayOutput = document.querySelector(".form-select-chosen__output");

    options.forEach((option) => {
      option.addEventListener("click", () => {
        const value = option.getAttribute("data-value");
        const text = option.textContent;
        hiddenInput.value = text;
        document.querySelector(".form-select-chosen__output:empty").style.display = 'none';
      });
    });
  });

  const search = document.querySelector(".form-select-chosen__search-input");
  search.addEventListener("input", () => {
    const value = search.value.trim().toLowerCase();
    const options = document.querySelectorAll(".form-select-chosen__option");
    options.forEach((option) => {
      if (option.textContent.toLowerCase().includes(value)) {
        option.style.display = "";
      } else {
        option.style.display = "none";
      }
    });
  });

  document.querySelector('form').addEventListener('submit', (e) => {
    if (document.querySelector(".form-select-chosen__input").value.trim() === '') {
      e.preventDefault();

      document.querySelector('.input-error').innerHTML = 'Выберите страну';
      document.querySelector('.input-error').style.display = 'block';
      document.querySelector('.form-select-chosen').style.border = '1px solid red'
    }
    else {
      document.querySelector('.input-error').style.display = 'none';
      document.querySelector('.form-select-chosen').style.border = '1px solid #ccc'

    }
  });
</script>